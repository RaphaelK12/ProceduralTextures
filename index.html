<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>ProceduralTextures</title>

		<link type='text/css' rel='stylesheet' href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,600' >
		<link type='text/css' rel='stylesheet' href="css/zenburn.css">
		<link type='text/css' rel='stylesheet' href="css/style.css">

		<script type="text/javascript" src="/src/highlight.min.js"></script>
		<script type="text/javascript" src="/src/glslCanvas.js" defer></script>
		<script type="text/javascript" src="/src/marked.js" ></script>

		</style>
	</head>
	<body>
		<div id="content"> </div>
		<script type="text/javascript" defer>
			window.addEventListener("hashchange", function () {
				loadMarkdown();
				loadShaders();
			}, false);

			function loadMarkdown(){
				var mdFileURL = window.location.hash.substr(1);
				
				var mdText = "No **text**";
				if(mdFileURL){
					mdText = fetchHTTP(mdFileURL);
				} else {
					mdText = fetchHTTP("README.md");
				}
				content.innerHTML = marked(mdText);

				// Load codes tags that have "src" attributes
				var list = document.getElementsByTagName("code");
				for(var i = 0; i < list.length; i++){
					if( list[i].hasAttribute("src") && list[i].className == "glsl" ){
						list[i].innerHTML = fetchHTTP(list[i].getAttribute("src"));
						hljs.highlightBlock(list[i]);
					}
				}
			}

			window.onload = function(){
				loadMarkdown();
				loadShaders();
				renderShaders(); 
			};
		</script>
	</body>
</html>